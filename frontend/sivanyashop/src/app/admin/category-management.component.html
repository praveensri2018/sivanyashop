<!-- FILE: src/app/admin/category-management.component.html -->
<div class="admin-container">
  <h2>ğŸ“‚ Category Management</h2>

  <!-- CREATE / EDIT FORM -->
  <section class="card">
    <h3>{{ editingId ? 'âœï¸ Edit Category' : 'â• Create Category' }}</h3>

    <form [formGroup]="form" (ngSubmit)="createCategory()" class="form-grid">
      <label>
        Category Name
        <input formControlName="name" placeholder="e.g. Electronics" />
      </label>

      <label>
        Parent Category (optional)
        <select formControlName="parentCategoryId">
          <option [ngValue]="null">-- None (top-level) --</option>
          <option *ngFor="let c of categories" [ngValue]="c.id">{{ c.name }}</option>
        </select>
      </label>

      <div class="btn-row">
        <button class="btn-primary" type="submit">
          {{ editingId ? 'Update Category' : 'Create Category' }}
        </button>
        <button *ngIf="editingId" type="button" class="btn-cancel" (click)="cancelEdit()">Cancel</button>
      </div>
    </form>
  </section>

  <!-- EXISTING CATEGORIES -->
  <section class="card">
    <h3>Existing Categories</h3>

    <div *ngIf="loading">Loading...</div>
    <ul *ngIf="!loading && categories.length === 0">No categories yet.</ul>

    <ul *ngIf="categories.length > 0" class="category-list">
      <li *ngFor="let c of categories">
        <div class="row">
          <strong>{{ c.name }}</strong>
          <span class="muted">(id: {{ c.id }})</span>
        </div>

        <div *ngIf="c.parentCategoryId" class="muted">
          Parent ID: {{ c.parentCategoryId }}
        </div>

        <div class="actions">
          <button class="btn-small" (click)="editCategory(c)">Edit</button>
          <button class="btn-danger" (click)="deleteCategory(c.id)">Delete</button>
        </div>
      </li>
    </ul>
  </section>
</div>
