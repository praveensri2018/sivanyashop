<!-- FILE: src/app/ui/header.component.html -->
<header class="meesho-header" [class.scrolled]="isScrolled" [class.mobile-menu-open]="isMobileMenuOpen">
  <!-- Top Bar -->
  <div class="header-top">
    <div class="container">
      <div class="header-row">
        <!-- Left: Hamburger Menu & Brand -->
        <div class="header-left">
          <!-- Hamburger Menu Button -->
          <button class="hamburger-btn" (click)="toggleMobileMenu()" aria-label="Toggle menu">
            <span></span><span></span><span></span>
          </button>

          <!-- Brand Logo -->
          <a [routerLink]="getHomeRoute()" class="brand-logo">
            <img src="/assets/logo.png" alt="Sivanuya Trends Tops" />
          </a>
        </div>

        <!-- Center: Search Bar -->
        <div class="header-center">
          <form class="search-form" (ngSubmit)="onSearch()" role="search">
            <input type="search" name="q" [(ngModel)]="query" [placeholder]="getSearchPlaceholder()"
                   class="search-input" (input)="onInput($event)" autocomplete="off" />
            <button type="submit" class="search-btn"><i class="fas fa-search"></i></button>
          </form>
        </div>

        <!-- Right: Controls -->
        <div class="header-right">
          <!-- Cart Icon -->
          <a *ngIf="role !== 'admin'" routerLink="/cart" class="nav-icon cart-icon" aria-label="Cart">
            <i class="fas fa-shopping-cart"></i>
            <span class="badge" *ngIf="(cartCount$ | async) as cartCount">{{ cartCount > 0 ? cartCount : '' }}</span>
          </a>

          <!-- Login Button (for guests) -->
          <a *ngIf="!role" routerLink="/login" class="login-btn">
            <i class="fas fa-sign-in-alt"></i>
            <span class="login-text">Login</span>
          </a>
        </div>
      </div>
    </div>
  </div>

  <!-- Desktop Navigation -->
  <nav class="desktop-nav" *ngIf="role" style = "display: none;">
    <div class="container">
      <div class="nav-links">
        <a routerLink="/" class="nav-link" routerLinkActive="active">Home</a>
        
        <!-- Admin Navigation -->
        <ng-container *ngIf="role === 'admin'">
          <a routerLink="/admin" class="nav-link" routerLinkActive="active">Dashboard</a>
          <a routerLink="/admin/orders" class="nav-link" routerLinkActive="active">Orders</a>
          <a routerLink="/admin/products" class="nav-link" routerLinkActive="active">Products</a>
          
          <!-- ✅ NEW: Size Charts Menu Item -->
          <a routerLink="/admin/size-charts" class="nav-link" routerLinkActive="active">
            <i class="fas fa-ruler-combined" style="margin-right: 4px;"></i>
            Size Charts
          </a>
          
          <a routerLink="/admin/retailers" class="nav-link" routerLinkActive="active">Retailers</a>
          <a routerLink="/admin/categories" class="nav-link" routerLinkActive="active">Categories</a>
          <a routerLink="/payment-history" class="nav-link" routerLinkActive="active">Payments</a>
        </ng-container>

        <!-- Customer Navigation -->
        <ng-container *ngIf="role === 'customer'">
          <a routerLink="/orders" class="nav-link" routerLinkActive="active">My Orders</a>
          <a routerLink="/payment-history" class="nav-link" routerLinkActive="active">Payments</a>
        </ng-container>

        <!-- Retailer Navigation -->
        <ng-container *ngIf="role === 'retailer'">
          <a routerLink="/retailer" class="nav-link" routerLinkActive="active">Dashboard</a>
          <a routerLink="/orders" class="nav-link" routerLinkActive="active">Orders</a>
        </ng-container>
      </div>
    </div>
  </nav>
</header>

<!-- Mobile Sidebar Menu -->
<div class="mobile-sidebar" [class.open]="isMobileMenuOpen">
  <div class="sidebar-header">
    <button class="close-btn" (click)="toggleMobileMenu()" aria-label="Close menu">
      <i class="fas fa-times"></i>
    </button>
    <div class="sidebar-user" *ngIf="currentUser">
      <i class="fas fa-user-circle"></i>
      <div class="sidebar-user-info">
        <strong>{{ currentUser.name }}</strong>
        <span>{{ getRoleDisplayName() }}</span>
      </div>
    </div>
  </div>

  <nav class="sidebar-nav">
    <a routerLink="/" class="sidebar-link" (click)="toggleMobileMenu()">
      <i class="fas fa-home"></i><span>Home</span>
    </a>
    
    <!-- Admin Links -->
    <ng-container *ngIf="role === 'admin'">
      <a routerLink="/admin" class="sidebar-link" (click)="toggleMobileMenu()">
        <i class="fas fa-tachometer-alt"></i><span>Dashboard</span>
      </a>
      <a routerLink="/admin/orders" class="sidebar-link" (click)="toggleMobileMenu()">
        <i class="fas fa-shopping-bag"></i><span>Orders</span>
      </a>
      <a routerLink="/admin/products" class="sidebar-link" (click)="toggleMobileMenu()">
        <i class="fas fa-box"></i><span>Products</span>
      </a>
      
      <!-- ✅ NEW: Size Charts Menu Item (Mobile) -->
      <a routerLink="/admin/size-charts" class="sidebar-link" (click)="toggleMobileMenu()">
        <i class="fas fa-ruler-combined"></i><span>Size Charts</span>
      </a>
      
      <a routerLink="/admin/retailers" class="sidebar-link" (click)="toggleMobileMenu()">
        <i class="fas fa-users"></i><span>Retailers</span>
      </a>
      <a routerLink="/admin/categories" class="sidebar-link" (click)="toggleMobileMenu()">
        <i class="fas fa-tags"></i><span>Categories</span>
      </a>
    </ng-container>

    <!-- Customer Links -->
    <ng-container *ngIf="role === 'customer'">
      <a routerLink="/dashboard" class="sidebar-link" (click)="toggleMobileMenu()">
        <i class="fas fa-tachometer-alt"></i><span>Dashboard</span>
      </a>
      <a routerLink="/orders" class="sidebar-link" (click)="toggleMobileMenu()">
        <i class="fas fa-history"></i><span>My Orders</span>
      </a>
    </ng-container>

    <!-- Retailer Links -->
    <ng-container *ngIf="role === 'retailer'">
      <a routerLink="/retailer" class="sidebar-link" (click)="toggleMobileMenu()">
        <i class="fas fa-tachometer-alt"></i><span>Dashboard</span>
      </a>
      <a routerLink="/orders" class="sidebar-link" (click)="toggleMobileMenu()">
        <i class="fas fa-shopping-bag"></i><span>Orders</span>
      </a>
    </ng-container>

    <!-- Common Links -->
    <a routerLink="/payment-history" class="sidebar-link" (click)="toggleMobileMenu()">
      <i class="fas fa-credit-card"></i><span>Payments</span>
    </a>

    <a routerLink="/cart" class="sidebar-link" (click)="toggleMobileMenu()" *ngIf="role !== 'admin'">
      <i class="fas fa-shopping-cart"></i><span>Cart</span>
      <span class="sidebar-badge" *ngIf="(cartCount$ | async) as cartCount">{{ cartCount > 0 ? cartCount : '' }}</span>
    </a>

    <div class="sidebar-divider"></div>

    <!-- Auth Links -->
    <ng-container *ngIf="role; else guestLinks">
      <button class="sidebar-link logout-link" (click)="handleLogout()">
        <i class="fas fa-sign-out-alt"></i><span>Logout</span>
      </button>
    </ng-container>

    <ng-template #guestLinks>
      <a routerLink="/login" class="sidebar-link" (click)="toggleMobileMenu()">
        <i class="fas fa-sign-in-alt"></i><span>Login</span>
      </a>
      <a routerLink="/register" class="sidebar-link" (click)="toggleMobileMenu()">
        <i class="fas fa-user-plus"></i><span>Register</span>
      </a>
    </ng-template>
  </nav>
</div>

<!-- Mobile Menu Overlay -->
<div class="mobile-overlay" [class.active]="isMobileMenuOpen" (click)="toggleMobileMenu()"></div>